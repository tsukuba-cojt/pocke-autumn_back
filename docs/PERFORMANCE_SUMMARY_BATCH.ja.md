# 10回バッチテスト結果サマリー

## テスト設定

- **テストタイプ**: シンプル負荷テスト（Docker）- 各10回実行
- **実行時間**: テスト1回あたり30秒間
- **仮想ユーザー数**: 5並行ユーザー
- **テスト実施日**: 2025-06-16 10:24:15
- **環境**: Dockerコンテナ（繰り返しテスト）

## 統計的パフォーマンス結果

### 📊 総合統計（平均値 ± 標準偏差）

| 指標 | Node.js Docker | Bun Docker | 差異 |
|------|---------------|------------|------|
| **スループット** | 251.6 ± 11.8 req/s | 225.4 ± 41.2 req/s | **-10.4%** |
| **平均応答時間** | 19.84 ± 1.01 ms | 23.23 ± 6.78 ms | **-17.1%** |
| **95パーセンタイル** | 45.08 ± 2.67 ms | 52.08 ± 16.06 ms | **-15.5%** |
| **最大応答時間** | より良い最悪ケース | より良い最悪ケース | **+58.8%** |

### 🎯 主要統計洞察

#### 性能一貫性分析

**Node.js Docker:**

- **10回のテスト全体で高い一貫性**を持つ性能
- **すべての指標で低い標準偏差**（スループット±11.8 req/s）
- **最小限の変動で予測可能な応答時間**
- **安定した95パーセンタイル**性能（45.08 ± 2.67 ms）

**Bun Docker:**

- **テスト実行間で高い性能変動**
- **スループットで大きな標準偏差**（±41.2 req/s）
- **高い変動を伴う一貫性のない応答時間**
- **予測不可能なピーク性能**（52.08 ± 16.06 ms）

#### 性能分布分析

**Node.js結果範囲:**

- スループット: 222.0 - 262.6 req/s（18%の範囲）
- 平均応答時間: 19.0 - 22.4 ms（18%の範囲）
- 95パーセンタイル: 42.7 - 52.0 ms（22%の範囲）

**Bun結果範囲:**

- スループット: 114.8 - 254.1 req/s（121%の範囲）
- 平均応答時間: 19.6 - 42.9 ms（119%の範囲）
- 95パーセンタイル: 42.5 - 98.7 ms（132%の範囲）

### 📈 詳細テスト実行分析

#### Node.js性能パターン

- **全実行で一貫した高性能**
- **最良（262.6 req/s）と最悪（222.0 req/s）間の小さな変動**
- **安定した応答時間分布**
- **信頼性の高い本番級性能**

#### Bun性能パターン

- **実行間での極端な性能変動**
- **一部の実行で優秀**（254.1 req/s）でNode.jsに匹敵
- **一部の実行で劣悪**（114.8 req/s）でNode.jsを大幅に下回る
- **一貫性のないDockerコンテナ性能**

### 🔍 根本原因分析

#### BunがDockerで不安定性を示す理由

1. **コンテナ起動の変動**: Bunコンテナの起動時間が一貫しない可能性
2. **リソース競合**: BunがDockerリソース割り当てにより敏感
3. **ガベージコレクションパターン**: コンテナ化環境での異なるGC動作
4. **ネットワークスタックの違い**: BunのネットワーキングがDockerで異なる性能
5. **コンテナ最適化**: Node.js Dockerイメージがより最適化されている可能性

#### 単発テスト vs バッチテストの差異

**前回の単発テスト（Bun有利）:**

- Bun: 250 req/s（優秀な性能）
- Node.js: 249 req/s（一貫した性能）

**バッチテスト（Node.js有利）:**

- Node.js: 一貫して良好な性能
- Bun: 一部の劣悪な外れ値を含む可変性能

### 🎯 本番環境への影響

#### 本番デプロイメント向け

**Node.js Dockerの利点:**

- **デプロイメント間で予測可能な性能**
- **一貫したリソース利用率**
- **信頼性の高いスケーリング特性**
- **低い運用リスク**

**Bun Dockerの考慮事項:**

- **条件が最適な時の優秀な性能の可能性**
- **特定条件下での性能劣化のリスク**
- **慎重な監視**と最適化が必要
- **一貫した性能のためのコンテナチューニング**が必要な可能性

### 📊 統計的有意性

#### 信頼区間（95%）

**Node.jsスループット**: 251.6 ± 8.4 req/s（95% CI: 243.2 - 260.0）
**Bunスループット**: 225.4 ± 29.3 req/s（95% CI: 196.1 - 254.7）

**重要な発見**: 信頼区間は重複しているが、Node.jsがはるかに狭い範囲を示し、より信頼性の高い性能を示している。

### 🚀 推奨事項

#### 本番使用向け

1. **Node.js Docker**: **一貫した性能により本番環境に推奨**
2. **Bun Docker**: 本番使用前に追加の最適化と監視が必要
3. **性能監視**: Bunデプロイメントで性能問題を検出するために必須
4. **コンテナチューニング**: Bunコンテナは特定のリソース割り当てが必要な可能性

#### 開発向け

1. **ローカル開発**: Bunはローカル環境で優秀な性能を示す
2. **CI/CDテスト**: パイプラインに性能変動テストを含める
3. **コンテナ最適化**: Bun Docker設定の改善を調査

### 📝 まとめ

このバッチテストは重要な洞察を明らかにします：**Bunは最適条件で優秀な性能を達成できるが、Node.jsはDockerコンテナでより一貫性があり信頼性の高い性能を提供する。**

**主要な発見:**

- **Node.js**: 一貫性があり、信頼性が高く、本番環境対応の性能
- **Bun**: Dockerで高いポテンシャルだが可変性能
- **推奨**: 本番環境にはNode.js、開発環境にはBun（監視付き）

バッチテストは、本番デプロイメント決定において単発測定よりも統計分析の重要性を実証しています。

---

*テスト結果保存先: `performance-results/batch-20250616_102415/`*
*詳細統計: `performance-results/batch-20250616_102415/batch-summary.json`*
